{
  SortedSet<Index> combinedIndexes=new TreeSet<Index>();
  SortedSet<Index> indexesToRemove=new TreeSet<Index>();
  for (  Index idx1 : indexes) {
    if (!combinedIndexes.contains(idx1)) {
      for (      Index idx2 : indexes.tailSet(idx1)) {
        if (idx1 == idx2) {
          continue;
        }
        String index1Name=StringUtils.trimToEmpty(idx1.getName());
        String index2Name=StringUtils.trimToEmpty(idx2.getName());
        if (index1Name.equalsIgnoreCase(index2Name) && idx1.getTable().getName().equalsIgnoreCase(idx2.getTable().getName())) {
          for (          String column : idx2.getColumns()) {
            if (!idx1.getColumns().contains(column)) {
              idx1.getColumns().add(column);
            }
          }
          indexesToRemove.add(idx2);
        }
      }
      combinedIndexes.add(idx1);
    }
  }
  indexes.removeAll(indexesToRemove);
}
