{
  try {
    DatabaseSnapshot snapshot=null;
    try {
      snapshot=SnapshotGeneratorFactory.getInstance().createSnapshot(schemaToDrop,this,new SnapshotControl());
    }
 catch (    LiquibaseException e) {
      throw new UnexpectedLiquibaseException(e);
    }
    DiffResult diffResult=DiffGeneratorFactory.getInstance().compare(new DatabaseSnapshot(this),snapshot,new CompareControl());
    List<ChangeSet> changeSets=new DiffToChangeLog(diffResult,new DiffOutputControl(true,true,false)).generateChangeSets();
    final boolean reEnableFK=supportsForeignKeyDisable() && disableForeignKeyChecks();
    try {
      for (      ChangeSet changeSet : changeSets) {
        for (        Change change : changeSet.getChanges()) {
          System.out.println("Dropping " + change.getClass().getSimpleName());
          SqlStatement[] sqlStatements=change.generateStatements(this);
          for (          SqlStatement statement : sqlStatements) {
            ExecutorService.getInstance().getExecutor(this).execute(statement);
          }
        }
      }
    }
  finally {
      if (reEnableFK) {
        enableForeignKeyChecks();
      }
    }
  }
  finally {
    this.commit();
  }
}
