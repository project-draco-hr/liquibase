{
  Element node=currentChangeLogDOM.createElement("changeSet");
  node.setAttribute("id",getId());
  node.setAttribute("author",getAuthor());
  if (alwaysRun) {
    node.setAttribute("alwaysRun","true");
  }
  if (runOnChange) {
    node.setAttribute("runOnChange","true");
  }
  if (failOnError != null) {
    node.setAttribute("failOnError",failOnError.toString());
  }
  if (getContexts() != null && getContexts().size() > 0) {
    StringBuffer contextString=new StringBuffer();
    for (    String context : getContexts()) {
      contextString.append(context).append(",");
    }
    node.setAttribute("context",contextString.toString().replaceFirst(",$",""));
  }
  if (getDbmsSet() != null && getDbmsSet().size() > 0) {
    StringBuffer dbmsString=new StringBuffer();
    for (    String dbms : getDbmsSet()) {
      dbmsString.append(dbms).append(",");
    }
    node.setAttribute("dbms",dbmsString.toString().replaceFirst(",$",""));
  }
  if (StringUtils.trimToNull(getComments()) != null) {
    Element commentsElement=currentChangeLogDOM.createElement("comment");
    Text commentsText=currentChangeLogDOM.createTextNode(getComments());
    commentsElement.appendChild(commentsText);
    node.appendChild(commentsElement);
  }
  for (  Change change : getChanges()) {
    node.appendChild(change.createNode(currentChangeLogDOM));
  }
  return node;
}
