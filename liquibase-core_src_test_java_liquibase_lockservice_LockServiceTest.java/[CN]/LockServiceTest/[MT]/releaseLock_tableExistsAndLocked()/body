{
  Database database=createMock(Database.class);
  Executor executor=createMock(Executor.class);
  expect(executor.update(isA(UnlockDatabaseChangeLogStatement.class),isA(ArrayList.class))).andReturn(1);
  expect(database.doesChangeLogLockTableExist()).andReturn(true);
  database.commit();
  expectLastCall().atLeastOnce();
  executor.comment("Release Database Lock");
  expectLastCall().anyTimes();
  database.rollback();
  expectLastCall().anyTimes();
  replay(database);
  replay(executor);
  ExecutorService.getInstance().setExecutor(database,executor);
  LockService service=LockService.getInstance(database);
  service.releaseLock();
  verify(database);
}
