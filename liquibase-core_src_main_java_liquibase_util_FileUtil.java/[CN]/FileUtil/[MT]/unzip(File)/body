{
  File tempDir=File.createTempFile("liquibase-unzip",".dir");
  tempDir.delete();
  tempDir.mkdir();
  JarFile jarFile=new JarFile(zipFile);
  try {
    Enumeration<JarEntry> entries=jarFile.entries();
    while (entries.hasMoreElements()) {
      JarEntry entry=entries.nextElement();
      File entryFile=new File(tempDir,entry.getName());
      if (!entry.isDirectory()) {
        entryFile.getParentFile().mkdirs();
        FileOutputStream out=new FileOutputStream(entryFile);
        byte[] buf=new byte[1024];
        int len;
        InputStream inputStream=jarFile.getInputStream(entry);
        while ((len=inputStream.read(buf)) > 0) {
          if (!zipFile.exists()) {
            zipFile.getParentFile().mkdirs();
          }
          out.write(buf,0,len);
        }
        inputStream.close();
        out.close();
      }
    }
    FileUtil.deleteOnExit(tempDir);
  }
  finally {
    jarFile.close();
  }
  return tempDir;
}
