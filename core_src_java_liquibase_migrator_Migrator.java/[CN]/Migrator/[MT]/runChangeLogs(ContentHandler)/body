{
  try {
    InputStream inputStream=getFileOpener().getResourceAsStream(changeLogFile);
    if (inputStream == null) {
      throw new MigrationFailedException(null,changeLogFile + " does not exist");
    }
    xmlReader.setContentHandler(contentHandler);
    xmlReader.parse(new InputSource(inputStream));
    inputStream.close();
  }
 catch (  IOException e) {
    throw new MigrationFailedException(null,"Error Reading Migration File: " + e.getMessage(),e);
  }
catch (  SAXParseException e) {
    throw new MigrationFailedException(null,"Error parsing line " + e.getLineNumber() + " column "+ e.getColumnNumber()+ " of "+ ": "+ e.getMessage());
  }
catch (  SAXException e) {
    Throwable parentCause=e.getException();
    while (parentCause != null) {
      if (parentCause instanceof MigrationFailedException) {
        throw ((MigrationFailedException)parentCause);
      }
      parentCause=parentCause.getCause();
    }
    String reason=e.getMessage();
    String causeReason=null;
    if (e.getCause() != null) {
      causeReason=e.getCause().getMessage();
    }
    if (reason == null) {
      if (causeReason != null) {
        reason=causeReason;
      }
 else {
        reason="Unknown Reason";
      }
    }
    throw new MigrationFailedException(null,"Invalid Migration File: " + reason,e);
  }
}
