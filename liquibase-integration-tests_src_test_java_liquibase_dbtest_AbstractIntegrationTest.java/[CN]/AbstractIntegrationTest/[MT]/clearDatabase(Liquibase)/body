{
  liquibase.dropAll(getSchemasToDrop());
  Statement statement=null;
  try {
    statement=((JdbcConnection)database.getConnection()).getUnderlyingConnection().createStatement();
    try {
      statement.execute("drop table " + database.escapeTableName(database.getLiquibaseCatalogName(),database.getLiquibaseSchemaName(),database.getDatabaseChangeLogTableName()));
      statement.close();
      database.commit();
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
    try {
      statement.execute("drop table " + database.escapeTableName(database.getLiquibaseCatalogName(),database.getLiquibaseSchemaName(),database.getDatabaseChangeLogLockTableName()));
      statement.close();
      database.commit();
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
 catch (  SQLException e) {
    throw new DatabaseException(e);
  }
  SnapshotGeneratorFactory.resetAll();
  DatabaseFactory.reset();
}
