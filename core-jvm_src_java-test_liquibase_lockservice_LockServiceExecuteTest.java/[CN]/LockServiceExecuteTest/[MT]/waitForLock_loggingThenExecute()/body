{
  new DatabaseTestTemplate().testOnAvailableDatabases(new DatabaseTest(){
    public void performTest(    Database database) throws Exception {
      LockService.getInstance(database).reset();
      try {
        ExecutorService.getInstance().getExecutor(database).execute(new DropTableStatement(null,database.getDatabaseChangeLogTableName(),false),new ArrayList<SqlVisitor>());
      }
 catch (      DatabaseException e) {
        ;
      }
      try {
        ExecutorService.getInstance().getExecutor(database).execute(new DropTableStatement(null,database.getDatabaseChangeLogLockTableName(),false),new ArrayList<SqlVisitor>());
      }
 catch (      DatabaseException e) {
        ;
      }
      database.commit();
      Executor originalTemplate=ExecutorService.getInstance().getExecutor(database);
      ExecutorService.getInstance().setExecutor(database,new LoggingExecutor(originalTemplate,new StringWriter(),database));
      LockService lockManager=LockService.getInstance(database);
      lockManager.waitForLock();
      ExecutorService.getInstance().setExecutor(database,originalTemplate);
      lockManager.waitForLock();
    }
  }
);
}
