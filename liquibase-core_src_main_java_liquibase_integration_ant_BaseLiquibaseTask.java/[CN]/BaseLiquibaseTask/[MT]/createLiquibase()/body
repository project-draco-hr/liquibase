{
  ResourceAccessor antFO=new AntResourceAccessor(getProject(),classpath);
  ResourceAccessor fsFO=new FileSystemResourceAccessor();
  Database database=createDatabaseObject(getDriver(),getUrl(),getUsername(),getPassword(),getDefaultCatalogName(),getDefaultSchemaName(),getDatabaseClass());
  String changeLogFilePath=null;
  if (getChangeLogFile() != null) {
    changeLogFilePath=getChangeLogFile().toString();
  }
  Liquibase liquibase=new Liquibase(changeLogFilePath,new CompositeResourceAccessor(antFO,fsFO),database);
  for (  Map.Entry<String,Object> entry : changeLogProperties.entrySet()) {
    liquibase.setChangeLogParameter(entry.getKey(),entry.getValue());
  }
  return liquibase;
}
