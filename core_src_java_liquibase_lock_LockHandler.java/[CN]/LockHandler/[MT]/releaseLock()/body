{
  try {
    if (database.doesChangeLogLockTableExist()) {
      UpdateStatement releaseStatement=new UpdateStatement(database.getDefaultSchemaName(),database.getDatabaseChangeLogLockTableName());
      releaseStatement.addNewColumnValue("LOCKED",false);
      releaseStatement.addNewColumnValue("LOCKGRANTED",null);
      releaseStatement.addNewColumnValue("LOCKEDBY",null);
      releaseStatement.setWhereClause(" ID = 1");
      database.getJdbcTemplate().comment("Release Database Lock");
      int updatedRows=database.getJdbcTemplate().update(releaseStatement);
      if (updatedRows != 1) {
        if (database.getJdbcTemplate().executesStatements()) {
          throw new LockException("Did not update change log lock correctly.\n\n" + releaseStatement + " updated "+ updatedRows+ " instead of the expected 1 row.");
        }
      }
      database.commit();
      hasChangeLogLock=false;
      instances.remove(this.database);
      LogFactory.getLogger().info("Successfully released change log lock");
    }
  }
 catch (  Exception e) {
    throw new LockException(e);
  }
}
