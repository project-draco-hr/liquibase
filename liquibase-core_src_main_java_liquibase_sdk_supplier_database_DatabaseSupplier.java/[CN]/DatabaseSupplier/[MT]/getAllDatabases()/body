{
  if (allDatabases == null) {
    allDatabases=new HashSet<Database>(DatabaseFactory.getInstance().getImplementedDatabases());
    for (    Database database : allDatabases) {
      ConnectionConfigurationFactory configurationFactory=ConnectionConfigurationFactory.getInstance();
      for (      ConnectionSupplier connectionSupplier : configurationFactory.getConfigurations(database)) {
        try {
          Connection connection=connectionSupplier.openConnection();
          database.setConnection(new JdbcConnection(connection));
          break;
        }
 catch (        SQLException e) {
          System.out.println("Cannot connect to " + connectionSupplier.getJdbcUrl());
          database.setConnection(new OfflineConnection("offline:" + database.getShortName()));
        }
      }
    }
  }
  return allDatabases;
}
