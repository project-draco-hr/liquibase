{
  boolean seenCommand=false;
  for (int i=0; i < args.length; i++) {
    String arg=args[i];
    if (isCommand(arg)) {
      this.command=arg;
      seenCommand=true;
    }
 else     if (seenCommand) {
      if (commandParam == null) {
        commandParam=arg;
      }
 else {
        throw new CommandLineParsingException("Only one command option is allowed");
      }
    }
 else     if (arg.startsWith("--")) {
      String[] splitArg=arg.split("=");
      if (splitArg.length < 2) {
        throw new CommandLineParsingException("Could not parse '" + arg + "'");
      }
 else       if (splitArg.length > 2) {
        StringBuffer secondHalf=new StringBuffer();
        for (int j=1; j < splitArg.length; j++) {
          secondHalf.append(splitArg[j]).append("=");
        }
        splitArg=new String[]{splitArg[0],secondHalf.toString().replaceFirst("=$","")};
      }
      String attributeName=splitArg[0].replaceFirst("--","");
      String value=splitArg[1];
      try {
        Field field=getClass().getDeclaredField(attributeName);
        if (field.getType().equals(Boolean.class)) {
          field.set(this,Boolean.valueOf(value));
        }
 else {
          field.set(this,value);
        }
      }
 catch (      Exception e) {
        throw new CommandLineParsingException("Unknown parameter: '" + attributeName + "'");
      }
    }
 else {
      throw new CommandLineParsingException("Parameters must start with a '--'");
    }
  }
}
