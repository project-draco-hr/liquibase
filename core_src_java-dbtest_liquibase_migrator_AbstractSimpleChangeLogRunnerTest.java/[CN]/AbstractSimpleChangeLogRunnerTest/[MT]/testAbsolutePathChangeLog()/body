{
  if (database == null) {
    return;
  }
  Enumeration<URL> urls=new JUnitFileOpener().getResources(includedChangeLog);
  URL completeChangeLogURL=urls.nextElement();
  String absolutePathOfChangeLog=completeChangeLogURL.toExternalForm();
  absolutePathOfChangeLog=absolutePathOfChangeLog.replaceFirst("file:\\/","");
  if (System.getProperty("os.name").startsWith("Windows ")) {
    absolutePathOfChangeLog=absolutePathOfChangeLog.replace('/','\\');
  }
 else {
    absolutePathOfChangeLog="/" + absolutePathOfChangeLog;
  }
  Migrator migrator=createMigrator(absolutePathOfChangeLog,new FileSystemFileOpener());
  migrator.dropAll(getSchemasToDrop());
  migrator.update(this.contexts);
  migrator.update(this.contexts);
  migrator.dropAll(getSchemasToDrop());
}
