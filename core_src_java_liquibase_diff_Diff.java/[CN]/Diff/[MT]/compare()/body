{
  if (baseSnapshot == null) {
    baseSnapshot=baseDatabase.createDatabaseSnapshot(null,statusListeners);
  }
  if (targetSnapshot == null) {
    if (targetDatabase == null) {
      targetSnapshot=new SqlDatabaseSnapshot();
    }
 else {
      targetSnapshot=targetDatabase.createDatabaseSnapshot(null,statusListeners);
    }
  }
  DiffResult diffResult=new DiffResult(baseSnapshot,targetSnapshot);
  checkVersionInfo(diffResult);
  checkTables(diffResult);
  checkViews(diffResult);
  checkColumns(diffResult);
  checkForeignKeys(diffResult);
  checkPrimaryKeys(diffResult);
  checkIndexes(diffResult);
  checkSequences(diffResult);
  return diffResult;
}
