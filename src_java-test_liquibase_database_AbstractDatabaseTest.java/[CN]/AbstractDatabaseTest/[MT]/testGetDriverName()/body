{
  Connection connection=createMock(Connection.class);
  DatabaseMetaData metaData=createMock(DatabaseMetaData.class);
  expect(connection.getMetaData()).andReturn(metaData);
  expect(metaData.getDriverName()).andReturn("DriverNameHere");
  replay(connection);
  replay(metaData);
  AbstractDatabase database=getDatabase();
  database.setConnection(connection);
  assertEquals("DriverNameHere",database.getDriverName());
}
