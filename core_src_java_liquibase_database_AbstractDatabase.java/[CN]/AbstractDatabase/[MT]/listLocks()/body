{
  try {
    List<DatabaseChangeLogLock> allLocks=new ArrayList<DatabaseChangeLogLock>();
    RawSqlStatement sqlStatement=new RawSqlStatement((("select id, locked, lockgranted, lockedby from " + getDatabaseChangeLogLockTableName()).toUpperCase()));
    List<Map> rows=new JdbcTemplate(this).queryForList(sqlStatement);
    for (    Map columnMap : rows) {
      Boolean locked=(Boolean)columnMap.get("locked");
      if (locked) {
        allLocks.add(new DatabaseChangeLogLock((Integer)columnMap.get("id"),(Date)columnMap.get("LOCKGRANTED"),(String)columnMap.get("LOCKEDBY")));
      }
    }
    return allLocks.toArray(new DatabaseChangeLogLock[allLocks.size()]);
  }
 catch (  Exception e) {
    throw new LockException(e);
  }
}
