{
  DatabaseConnection con=database.getConnection();
  Statement stmt=null;
  try {
    stmt=con.createStatement();
    Statement stmtToUse=stmt;
    return action.doInStatement(stmtToUse);
  }
 catch (  SQLException ex) {
    JdbcUtils.closeStatement(stmt);
    stmt=null;
    throw new JDBCException("Error executing SQL " + StringUtils.join(applyVisitors(action.getStatement(),sqlVisitors),", "),ex);
  }
 finally {
    JdbcUtils.closeStatement(stmt);
  }
}
