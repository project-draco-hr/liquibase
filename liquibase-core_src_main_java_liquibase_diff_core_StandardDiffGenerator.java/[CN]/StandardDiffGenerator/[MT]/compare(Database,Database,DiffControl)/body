{
  DatabaseSnapshot referenceSnapshot=null;
  DatabaseSnapshot comparisonSnapshot=null;
  referenceSnapshot=SnapshotGeneratorFactory.getInstance().createSnapshot(diffControl.toSnapshotControl(DiffControl.DatabaseRole.REFERENCE),referenceDatabase);
  comparisonSnapshot=null;
  if (comparisonDatabase != null) {
    comparisonSnapshot=SnapshotGeneratorFactory.getInstance().createSnapshot(diffControl.toSnapshotControl(DiffControl.DatabaseRole.COMPARISON),comparisonDatabase);
  }
  return compare(referenceSnapshot,comparisonSnapshot,diffControl);
}
