{
  DatabaseSnapshot referenceSnapshot=DatabaseSnapshotGeneratorFactory.getInstance().createSnapshot(diffControl.toSnapshotControl(DiffControl.DatabaseRole.REFERENCE),referenceDatabase);
  DatabaseSnapshot comparisonSnapshot=null;
  if (comparisonDatabase != null) {
    comparisonSnapshot=DatabaseSnapshotGeneratorFactory.getInstance().createSnapshot(diffControl.toSnapshotControl(DiffControl.DatabaseRole.COMPARISON),comparisonDatabase);
  }
  return compare(referenceSnapshot,comparisonSnapshot,diffControl);
}
