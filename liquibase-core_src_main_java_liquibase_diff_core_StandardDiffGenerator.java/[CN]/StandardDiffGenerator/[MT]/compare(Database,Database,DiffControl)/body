{
  DatabaseSnapshot referenceSnapshot=DatabaseSnapshotGeneratorFactory.getInstance().createSnapshot(referenceDatabase,diffControl.toSnapshotControl(DiffControl.DatabaseRole.REFERENCE));
  DatabaseSnapshot comparisonSnapshot=null;
  if (comparisonDatabase != null) {
    comparisonSnapshot=DatabaseSnapshotGeneratorFactory.getInstance().createSnapshot(comparisonDatabase,diffControl.toSnapshotControl(DiffControl.DatabaseRole.COMPARISON));
  }
  return compare(referenceSnapshot,comparisonSnapshot,diffControl);
}
