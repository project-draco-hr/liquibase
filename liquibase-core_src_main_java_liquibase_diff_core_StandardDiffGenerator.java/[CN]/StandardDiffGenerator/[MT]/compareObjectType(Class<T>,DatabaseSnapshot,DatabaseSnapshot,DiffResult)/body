{
  for (  DiffControl.SchemaComparison schemaComparison : diffResult.getDiffControl().getSchemaComparisons()) {
    Schema referenceSchema=schemaComparison.getReferenceSchema().clone(referenceSnapshot.getDatabase());
    Schema comparisonSchema=schemaComparison.getComparisonSchema().clone(comparisonSnapshot.getDatabase());
    for (    T referenceObject : referenceSnapshot.getDatabaseObjects(referenceSchema,type)) {
      if (comparisonSnapshot.contains(comparisonSchema,referenceObject)) {
        if (!comparisonSnapshot.matches(comparisonSchema,referenceObject)) {
          diffResult.getObjectDiff(type).addChanged(referenceObject);
        }
      }
 else {
        diffResult.getObjectDiff(type).addMissing(referenceObject);
      }
    }
    for (    T targetObject : comparisonSnapshot.getDatabaseObjects(comparisonSchema,type)) {
      if (!referenceSnapshot.contains(referenceSchema,targetObject)) {
        diffResult.getObjectDiff(type).addUnexpected(targetObject);
      }
    }
  }
}
