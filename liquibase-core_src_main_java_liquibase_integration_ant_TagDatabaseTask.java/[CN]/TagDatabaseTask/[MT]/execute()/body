{
  if (StringUtils.trimToNull(getTag()) == null) {
    throw new BuildException("tagDatabase requires tag parameter to be set");
  }
  if (!shouldRun()) {
    return;
  }
  super.execute();
  Liquibase liquibase=null;
  try {
    liquibase=createLiquibase();
    liquibase.tag(getTag());
  }
 catch (  Exception e) {
    throw new BuildException(e);
  }
 finally {
    closeDatabase(liquibase);
  }
}
