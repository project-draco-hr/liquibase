{
  FileInputStream in=new FileInputStream(changeLogFile);
  String existingChangeLog=StreamUtil.getStreamContents(in);
  in.close();
  FileOutputStream out=new FileOutputStream(changeLogFile);
  if (!existingChangeLog.contains("</databaseChangeLog>")) {
    write(Arrays.asList(changeSet),out);
  }
 else {
    existingChangeLog=existingChangeLog.replaceFirst("</databaseChangeLog>",serialize(changeSet) + "\n</databaseChangeLog>");
    StreamUtil.copy(new ByteArrayInputStream(existingChangeLog.getBytes()),out);
  }
  out.flush();
  out.close();
}
