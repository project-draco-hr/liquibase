{
  List<ChangeSet> changeSets=new ArrayList<ChangeSet>();
  addMissingTableChanges(changeSets,targetDatabase);
  addMissingColumnChanges(changeSets,targetDatabase);
  addChangedColumnChanges(changeSets);
  addMissingPrimaryKeyChanges(changeSets);
  addUnexpectedPrimaryKeyChanges(changeSets);
  addUnexpectedForeignKeyChanges(changeSets);
  addMissingUniqueConstraintChanges(changeSets);
  addUnexpectedUniqueConstraintChanges(changeSets);
  if (diffData) {
    addInsertDataChanges(changeSets,dataDir);
  }
  addMissingForeignKeyChanges(changeSets);
  addUnexpectedIndexChanges(changeSets);
  addMissingIndexChanges(changeSets);
  addUnexpectedColumnChanges(changeSets);
  addMissingSequenceChanges(changeSets);
  addUnexpectedSequenceChanges(changeSets);
  addMissingViewChanges(changeSets);
  addUnexpectedViewChanges(changeSets);
  addChangedViewChanges(changeSets);
  addUnexpectedTableChanges(changeSets);
  changeLogSerializer.write(changeSets,out);
  out.flush();
}
