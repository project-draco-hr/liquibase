{
  DBTree tree=LiquibaseProjectComponent.getInstance().getDbTree();
  Object pathComponent=tree.getSelectionPath().getPathComponent(1);
  try {
    Connection connection=((AbstractDBObject)pathComponent).getDatabase().getConnection();
    return DatabaseFactory.getInstance().findCorrectDatabaseImplementation(connection);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
