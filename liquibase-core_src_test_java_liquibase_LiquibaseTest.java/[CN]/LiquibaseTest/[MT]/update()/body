{
  Contexts contexts=new Contexts("a,b");
  Liquibase liquibase=new Liquibase("com/example/test.xml",mockResourceAccessor,mockDatabase){
    @Override protected ChangeLogIterator getStandardChangelogIterator(    Contexts contexts,    DatabaseChangeLog changeLog) throws DatabaseException {
      return mockChangeLogIterator;
    }
  }
;
  liquibase.update(contexts);
  verify(mockLockService).waitForLock();
  verify(mockChangeLog).validate(mockDatabase,contexts);
  verify(mockChangeLogParser).parse("com/example/test.xml",liquibase.getChangeLogParameters(),mockResourceAccessor);
  verify(mockChangeLogIterator).run(any(UpdateVisitor.class),eq(mockDatabase));
  verify(mockLockService).releaseLock();
  verify(mockDatabase).setObjectQuotingStrategy(ObjectQuotingStrategy.LEGACY);
  assertEquals("Passed contexts were not set on the changelog parameters object","a,b",liquibase.getChangeLogParameters().getContexts().toString());
}
