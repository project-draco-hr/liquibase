{
  if (!supportsTest(database)) {
    return;
  }
  setup(database);
  DatabaseSnapshot snapshot=DatabaseSnapshotGeneratorFactory.getInstance().createSnapshot(database,null,null);
  preExecuteAssert(snapshot);
  try {
    executeStatements(database);
    database.getConnection().commit();
  }
 catch (  DatabaseException e) {
    boolean expectsException=expectedException(database,e);
    if (expectsException) {
      return;
    }
 else {
      throw e;
    }
  }
  snapshot=DatabaseSnapshotGeneratorFactory.getInstance().createSnapshot(database,null,null);
  postExecuteAssert(snapshot);
}
