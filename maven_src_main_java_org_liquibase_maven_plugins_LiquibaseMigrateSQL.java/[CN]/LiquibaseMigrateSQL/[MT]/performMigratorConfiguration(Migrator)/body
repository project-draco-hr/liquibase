{
  Writer w=null;
  try {
    if (!migrationSqlOutputFile.exists()) {
      migrationSqlOutputFile.getParentFile().mkdirs();
    }
    w=new FileWriter(migrationSqlOutputFile);
  }
 catch (  IOException e) {
    getLog().error(e);
    throw new MojoExecutionException("Failed to create SQL output writer",e);
  }
  getLog().info("Output SQL Migration File: " + migrationSqlOutputFile.getAbsolutePath());
  if (changeLogSqlOnly) {
    getLog().info("Creating Change Log SQL Only");
    migrator.setMode(Migrator.Mode.OUTPUT_CHANGELOG_ONLY_SQL_MODE);
  }
 else {
    getLog().info("Creating Change Log SQL and Migrating Database");
    migrator.setMode(Migrator.Mode.OUTPUT_SQL_MODE);
  }
  migrator.setOutputSQLWriter(w);
}
