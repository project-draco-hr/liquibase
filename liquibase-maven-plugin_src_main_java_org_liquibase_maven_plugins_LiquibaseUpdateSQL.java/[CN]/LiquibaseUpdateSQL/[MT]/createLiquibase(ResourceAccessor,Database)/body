{
  Liquibase liquibase=super.createLiquibase(fo,db);
  try {
    if (!migrationSqlOutputFile.exists()) {
      migrationSqlOutputFile.getParentFile().mkdirs();
      if (!migrationSqlOutputFile.createNewFile()) {
        throw new MojoExecutionException("Cannot create the migration SQL file; " + migrationSqlOutputFile.getAbsolutePath());
      }
    }
    if (outputFileEncoding == null) {
      getLog().info("Char encoding not set! The created file will be system dependent!");
      outputWriter=new FileWriter(migrationSqlOutputFile);
    }
 else {
      getLog().debug("Writing output file with [" + outputFileEncoding + "] file encoding.");
      outputWriter=new BufferedWriter(new OutputStreamWriter(new FileOutputStream(migrationSqlOutputFile),outputFileEncoding));
    }
  }
 catch (  IOException e) {
    getLog().error(e);
    throw new MojoExecutionException("Failed to create SQL output writer",e);
  }
  getLog().info("Output SQL Migration File: " + migrationSqlOutputFile.getAbsolutePath());
  return liquibase;
}
