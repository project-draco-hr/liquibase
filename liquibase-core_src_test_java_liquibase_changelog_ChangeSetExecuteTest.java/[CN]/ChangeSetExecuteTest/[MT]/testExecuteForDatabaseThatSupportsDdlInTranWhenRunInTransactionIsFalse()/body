{
  Database database=createMockDatabaseThatSupportsDdlInTran();
  ExecutorService.getInstance().setExecutor(database,createMockExecutor());
  checkOrder(database,true);
  database.setAutoCommit(true);
  checkOrder(database,false);
  trainToAcceptAnyNumberOfCommitsOrRollbacks(database);
  checkOrder(database,true);
  database.setAutoCommit(false);
  replay(database);
  ChangeSet changeSet=createTestChangeSet(false);
  changeSet.execute(new DatabaseChangeLog("test.xml"),database);
  verify(database);
}
