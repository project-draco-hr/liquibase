{
  Database database=createMock(Database.class);
  replay(database);
  LockManager lockManager=LockManager.getInstance(database);
  assertFalse(lockManager.hasChangeLogLock());
  Field field=lockManager.getClass().getDeclaredField("hasChangeLogLock");
  field.setAccessible(true);
  field.set(lockManager,true);
  assertTrue(lockManager.hasChangeLogLock());
  assertTrue(lockManager.acquireLock());
}
