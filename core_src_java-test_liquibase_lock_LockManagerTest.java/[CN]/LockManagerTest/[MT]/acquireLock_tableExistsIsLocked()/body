{
  Database database=createMock(Database.class);
  database.checkDatabaseChangeLogLockTable();
  expectLastCall();
  expect(database.queryForObject(isA(SelectFromDatabaseChangeLogLockStatement.class),eq(Boolean.class),isA(ArrayList.class))).andReturn(true);
  replay(database);
  LockManager manager=LockManager.getInstance(database);
  assertFalse(manager.acquireLock());
  verify(database);
}
