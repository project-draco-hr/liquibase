{
  Statement statement=null;
  ResultSet resultSet=null;
  DatabaseConnection connection=database.getConnection();
  try {
    statement=connection.createStatement();
    resultSet=statement.executeQuery(getSql());
    if (!resultSet.next()) {
      throw new PreconditionFailedException("No rows returned from SQL Precondition",changeLog,this);
    }
    String returnString=resultSet.getString(1);
    if (resultSet.next()) {
      throw new PreconditionFailedException("Too Many rows returned from SQL Precondition",changeLog,this);
    }
    if (!expectedResult.equals(returnString)) {
      throw new PreconditionFailedException("SQL Precondition failed.  Expected '" + expectedResult + "' got '"+ returnString+ "'",changeLog,this);
    }
  }
 catch (  SQLException e) {
    throw new PreconditionErrorException(e,changeLog,this);
  }
 finally {
    try {
      if (resultSet != null) {
        resultSet.close();
      }
    }
 catch (    SQLException e) {
      ;
    }
    try {
      if (statement != null) {
        statement.close();
      }
    }
 catch (    SQLException e) {
      ;
    }
  }
}
