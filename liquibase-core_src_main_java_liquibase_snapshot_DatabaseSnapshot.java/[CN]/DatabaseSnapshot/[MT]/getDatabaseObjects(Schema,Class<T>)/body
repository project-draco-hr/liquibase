{
  if (database != null) {
    schema=database.correctSchema(schema);
  }
  if (!schemaSnapshots.containsKey(schema)) {
    return Collections.unmodifiableSet(new HashSet<T>());
  }
  Set<? extends DatabaseObject> snapshotItems=schemaSnapshots.get(schema).databaseObjects.get(type);
  if (snapshotItems == null) {
    return Collections.unmodifiableSet(new HashSet<T>());
  }
  return (Set<T>)Collections.unmodifiableSet(snapshotItems);
}
