{
  try {
    Schema schema=new Schema(getCatalogName(),getSchemaName());
    Index example=new Index();
    example.setTable(new Table());
    if (StringUtils.trimToNull(getTableName()) != null) {
      example.getTable().setName(getTableName());
    }
    example.getTable().setSchema(schema);
    example.setName(getIndexName());
    if (StringUtils.trimToNull(getColumnNames()) != null) {
      for (      String column : getColumnNames().split("\\s*,\\s*")) {
        example.getColumns().add(column);
      }
    }
    if (!SnapshotGeneratorFactory.getInstance().has(example,database)) {
      String name="";
      if (getIndexName() != null) {
        name+=database.escapeStringForDatabase(getIndexName());
      }
      if (StringUtils.trimToNull(getTableName()) != null) {
        name+=" on " + database.escapeStringForDatabase(getTableName());
        if (StringUtils.trimToNull(getColumnNames()) != null) {
          name+=" columns " + getColumnNames();
        }
      }
      throw new PreconditionFailedException("Index " + name + " does not exist",changeLog,this);
    }
  }
 catch (  Exception e) {
    throw new PreconditionErrorException(e,changeLog,this);
  }
}
