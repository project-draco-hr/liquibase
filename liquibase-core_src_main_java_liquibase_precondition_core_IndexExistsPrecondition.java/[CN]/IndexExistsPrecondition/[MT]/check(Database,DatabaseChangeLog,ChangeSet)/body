{
  try {
    Schema schema=new Schema(getCatalogName(),getSchemaName());
    if (database != null) {
      schema=database.correctSchema(schema);
    }
    Index example=new Index();
    if (StringUtils.trimToNull(getTableName()) != null) {
      example.setTable(new Table().setName(getTableName()));
    }
    example.setName(getIndexName());
    if (StringUtils.trimToNull(getColumnNames()) != null) {
      for (      String column : getColumnNames().split("\\s*,\\s*")) {
        example.getColumns().add(column);
      }
    }
    if (!DatabaseObjectGeneratorFactory.getInstance().getGenerator(Index.class,database).has(schema,example,database)) {
      String name="";
      if (getIndexName() != null) {
        name+=database.escapeStringForDatabase(getIndexName());
      }
      if (StringUtils.trimToNull(getTableName()) != null) {
        name+=" on " + database.escapeStringForDatabase(getTableName());
        if (StringUtils.trimToNull(getColumnNames()) != null) {
          name+=" columns " + getColumnNames();
        }
      }
      throw new PreconditionFailedException("Index " + name + " does not exist",changeLog,this);
    }
  }
 catch (  DatabaseException e) {
    throw new PreconditionErrorException(e,changeLog,this);
  }
}
