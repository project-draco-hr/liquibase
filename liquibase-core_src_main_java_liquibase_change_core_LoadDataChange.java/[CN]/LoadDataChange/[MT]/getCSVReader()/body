{
  ResourceAccessor resourceAccessor=getResourceAccessor();
  if (resourceAccessor == null) {
    throw new UnexpectedLiquibaseException("No file resourceAccessor specified for " + getFile());
  }
  InputStream stream=StreamUtil.singleInputStream(getFile(),resourceAccessor);
  Reader streamReader;
  if (getEncoding() == null) {
    streamReader=new UtfBomAwareReader(stream);
  }
 else {
    streamReader=new UtfBomAwareReader(stream,getEncoding());
  }
  char quotchar;
  if (0 == this.quotchar.length()) {
    quotchar='\1';
  }
 else {
    quotchar=this.quotchar.charAt(0);
  }
  return new CSVReader(streamReader,separator.charAt(0),quotchar);
}
