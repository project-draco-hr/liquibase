{
  Database database=snapshot.getDatabase();
  updateListeners("Reading views for " + database.toString() + " ...");
  ResultSet rs=databaseMetaData.getTables(database.convertRequestedSchemaToCatalog(schema),database.convertRequestedSchemaToSchema(schema),null,new String[]{"VIEW"});
  try {
    while (rs.next()) {
      View view=readView(rs,database);
      if (database.isSystemView(view.getRawCatalogName(),view.getRawSchemaName(),view.getName())) {
        continue;
      }
      snapshot.getViews().add(view);
    }
  }
  finally {
    rs.close();
  }
}
