{
  FileOpener antFO=new AntFileOpener(getProject(),classpath);
  FileOpener fsFO=new FileSystemFileOpener();
  Database database=createDatabaseObject(getDriver(),getUrl(),getUsername(),getPassword(),getDefaultSchemaName());
  String changeLogFile=null;
  if (getChangeLogFile() != null) {
    changeLogFile=getChangeLogFile().trim();
  }
  Liquibase liquibase=new Liquibase(changeLogFile,new CompositeFileOpener(antFO,fsFO),database);
  liquibase.setCurrentDateTimeFunction(currentDateTimeFunction);
  return liquibase;
}
