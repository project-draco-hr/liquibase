{
  Executor executor=ExecutorService.getInstance().getExecutor(database);
  try {
    if (database.hasDatabaseChangeLogLockTable()) {
      executor.comment("Release Database Lock");
      database.rollback();
      executor.update(new UnlockDatabaseChangeLogStatement());
      database.commit();
    }
 else {
      System.err.println("No changelog lock table! Can not unlock.");
    }
  }
 catch (  Exception e) {
    throw new LockException(e);
  }
 finally {
    try {
      hasChangeLogLock=false;
      database.setCanCacheLiquibaseTableInfo(false);
      LogFactory.getLogger().info("Successfully released change log lock");
      database.rollback();
    }
 catch (    DatabaseException e) {
      ;
    }
  }
}
