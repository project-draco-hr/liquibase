{
  String rootPath=Validate.notNullArgument(url,"Can't add null rootPath").toExternalForm();
  Validate.isTrueArgument(!rootPath.isEmpty(),"Can't add empty rootPath");
  if (path != null) {
    if (path.startsWith(".")) {
      path=path.substring(1);
    }
    int contentIdx=rootPath.indexOf(path);
    if (contentIdx > 0) {
      rootPath=rootPath.substring(0,contentIdx);
    }
 else {
      throw new IllegalArgumentException("path does not match rootPath='" + rootPath + "' path='"+ path+ "'");
    }
  }
  if (rootPath.endsWith(JAR_URL_QUERY_PART)) {
    rootPath=rootPath.substring(0,rootPath.length() - JAR_URL_QUERY_PART.length());
  }
  if (rootPath.isEmpty()) {
    throw new IllegalArgumentException("Can't process empty url path for list scanning");
  }
  return rootPath;
}
