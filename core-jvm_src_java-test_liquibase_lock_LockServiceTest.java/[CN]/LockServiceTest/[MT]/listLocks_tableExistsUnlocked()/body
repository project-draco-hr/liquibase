{
  Database database=createMock(Database.class);
  ReadExecutor readExecutor=createMock(ReadExecutor.class);
  database.checkDatabaseChangeLogLockTable();
  expectLastCall().anyTimes();
  expect(readExecutor.queryForObject(isA(SelectFromDatabaseChangeLogLockStatement.class),eq(Boolean.class),isA(ArrayList.class))).andReturn(true).anyTimes();
  expect(database.doesChangeLogLockTableExist()).andReturn(true);
  List<Map> resultList=new ArrayList<Map>();
  expect(readExecutor.queryForList(isA(SelectFromDatabaseChangeLogLockStatement.class),isA(ArrayList.class))).andReturn(resultList);
  replay(database);
  replay(readExecutor);
  ExecutorService.getInstance().setReadExecutor(database,readExecutor);
  LockService service=LockService.getInstance(database);
  DatabaseChangeLogLock[] locks=service.listLocks();
  assertEquals(0,locks.length);
  verify(database);
}
