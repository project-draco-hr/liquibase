{
  LiquibaseProjectComponent liquibaseProjectComponent=LiquibaseProjectComponent.getInstance();
  if (changeLogFile == null) {
    changeLogFile=liquibaseProjectComponent.getRootChangeLogFile();
  }
  Migrator migrator=new Migrator(changeLogFile,new CompositeFileOpener(new IntellijFileOpener(),new FileSystemFileOpener()),database);
  try {
    migrator.checkDatabaseChangeLogTable();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  return migrator;
}
