{
  String sql="ALTER TABLE " + database.escapeTableName(getBaseTableSchemaName(),getBaseTableName()) + " ADD CONSTRAINT "+ getConstraintName()+ " FOREIGN KEY ("+ getBaseColumnNames()+ ") REFERENCES "+ database.escapeTableName(getReferencedTableSchemaName(),getReferencedTableName())+ "("+ getReferencedColumnNames()+ ")";
  if (isDeleteCascade()) {
    sql+=" ON DELETE CASCADE";
  }
  if (isDeferrable() || isInitiallyDeferred()) {
    if (!database.supportsInitiallyDeferrableColumns()) {
      throw new StatementNotSupportedOnDatabaseException("Database does not support deferrable foreign keys",this,database);
    }
    if (isDeferrable()) {
      sql+=" DEFERRABLE";
    }
    if (isInitiallyDeferred()) {
      sql+=" INITIALLY DEFERRED";
    }
  }
  return sql;
}
