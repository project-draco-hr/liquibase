{
  DatabaseSnapshot referenceSnapshot=createReferenceSnapshot();
  DatabaseSnapshot targetSnapshot=createTargetSnapshot();
  CompareControl compareControl=new CompareControl(referenceSnapshot.getSnapshotControl().getTypesToInclude());
  return DiffGeneratorFactory.getInstance().compare(referenceSnapshot,targetSnapshot,compareControl);
}
