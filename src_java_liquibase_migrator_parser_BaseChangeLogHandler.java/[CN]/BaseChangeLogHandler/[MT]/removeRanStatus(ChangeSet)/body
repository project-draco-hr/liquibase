{
  Migrator migrator=changeSet.getDatabaseChangeLog().getMigrator();
  String sql="DELETE FROM DATABASECHANGELOG WHERE ID='?' AND AUTHOR='?' AND FILENAME='?'";
  sql=sql.replaceFirst("\\?",escapeStringForDatabase(changeSet.getId()));
  sql=sql.replaceFirst("\\?",escapeStringForDatabase(changeSet.getAuthor()));
  sql=sql.replaceFirst("\\?",escapeStringForDatabase(changeSet.getDatabaseChangeLog().getFilePath()));
  Writer sqlOutputWriter=migrator.getOutputSQLWriter();
  if (sqlOutputWriter == null) {
    Connection connection=migrator.getDatabase().getConnection();
    try {
      Statement statement=connection.createStatement();
      statement.executeUpdate(sql);
      statement.close();
      connection.commit();
    }
 catch (    SQLException e) {
      throw new JDBCException(e);
    }
  }
 else {
    sqlOutputWriter.write(sql + ";" + StreamUtil.getLineSeparator()+ StreamUtil.getLineSeparator());
  }
}
