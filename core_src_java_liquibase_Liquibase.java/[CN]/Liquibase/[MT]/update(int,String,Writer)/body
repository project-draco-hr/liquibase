{
  WriteExecutor oldTemplate=ExecutorService.getInstance().getWriteExecutor(database);
  LoggingExecutor loggingExecutor=new LoggingExecutor(output,database);
  ExecutorService.getInstance().setWriteExecutor(database,loggingExecutor);
  outputHeader("Update " + changesToApply + " Change Sets Database Script");
  update(changesToApply,contexts);
  try {
    output.flush();
  }
 catch (  IOException e) {
    throw new LiquibaseException(e);
  }
  ExecutorService.getInstance().setWriteExecutor(database,oldTemplate);
}
