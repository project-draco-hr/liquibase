{
  SortedSet<TypeConverter> converters=new TreeSet<TypeConverter>(new Comparator<TypeConverter>(){
    public int compare(    TypeConverter o1,    TypeConverter o2){
      return Integer.valueOf(o1.getPriority()).compareTo(o2.getPriority());
    }
  }
);
  for (  Class<TypeConverter> converterClass : ServiceLocator.getInstance().findClasses(TypeConverter.class)) {
    try {
      TypeConverter converter=converterClass.newInstance();
      if (converter.supports(database)) {
        converters.add(converter);
      }
    }
 catch (    Exception e) {
      throw new UnexpectedLiquibaseException(e);
    }
  }
  return converters.last();
}
