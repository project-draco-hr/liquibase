{
  if (!generatorUnderTest.isValidGenerator(sqlStatement,database) || generatorUnderTest.validate(sqlStatement,database).hasErrors() || !SqlGeneratorFactory.getInstance().getBestGenerator(sqlStatement,database).getClass().equals(generatorUnderTest.getClass())) {
    return false;
  }
  boolean shouldInclude=true;
  if (includeDatabases != null && includeDatabases.length > 0) {
    shouldInclude=Arrays.asList(includeDatabases).contains(database.getClass());
  }
  boolean shouldExclude=false;
  if (excludeDatabases != null && excludeDatabases.length > 0) {
    shouldExclude=Arrays.asList(excludeDatabases).contains(database.getClass());
  }
  return !shouldExclude && shouldInclude;
}
