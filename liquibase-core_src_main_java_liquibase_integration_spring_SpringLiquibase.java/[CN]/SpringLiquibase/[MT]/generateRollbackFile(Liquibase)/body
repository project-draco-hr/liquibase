{
  if (rollbackFile != null) {
    FileWriter output=null;
    try {
      output=new FileWriter(rollbackFile);
      if (tag != null) {
        liquibase.futureRollbackSQL(tag,new Contexts(getContexts()),new LabelExpression(getLabels()),output);
      }
 else {
        liquibase.futureRollbackSQL(new Contexts(getContexts()),new LabelExpression(getLabels()),output);
      }
    }
 catch (    IOException e) {
      throw new LiquibaseException("Unable to generate rollback file.",e);
    }
 finally {
      try {
        if (output != null) {
          output.close();
        }
      }
 catch (      IOException e) {
        log.severe("Error closing output",e);
      }
    }
  }
}
