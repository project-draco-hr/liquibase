{
  AddColumnChange refactoring=new AddColumnChange();
  refactoring.setSchemaName("SCHEMA");
  refactoring.setTableName("TAB");
  AddColumnConfig column=new AddColumnConfig();
  column.setName("NEWCOL");
  column.setType("TYP");
  ConstraintsConfig constraints=new ConstraintsConfig();
  constraints.setNullable(Boolean.FALSE);
  constraints.setPrimaryKey(Boolean.TRUE);
  column.setAutoIncrement(Boolean.TRUE);
  column.setStartWith(BigInteger.valueOf(2));
  column.setIncrementBy(BigInteger.TEN);
  column.setConstraints(constraints);
  refactoring.addColumn(column);
  testChangeOnAll(refactoring,new GenerateAllValidator(){
    @Override public void validate(    SqlStatement[] sqlStatements,    Database database){
      if (database instanceof DB2Database) {
        assertEquals(2,sqlStatements.length);
        assertTrue(sqlStatements[0] instanceof AddColumnStatement);
        assertTrue(sqlStatements[1] instanceof ReorganizeTableStatement);
      }
 else {
        assertEquals(1,sqlStatements.length);
        assertTrue(sqlStatements[0] instanceof AddColumnStatement);
      }
      assertTrue(((AddColumnStatement)sqlStatements[0]).isPrimaryKey());
      assertTrue(((AddColumnStatement)sqlStatements[0]).isAutoIncrement());
      assertNotNull(((AddColumnStatement)sqlStatements[0]).getAutoIncrementConstraint());
      assertEquals(BigInteger.valueOf(2),((AddColumnStatement)sqlStatements[0]).getAutoIncrementConstraint().getStartWith());
      assertEquals(BigInteger.TEN,((AddColumnStatement)sqlStatements[0]).getAutoIncrementConstraint().getIncrementBy());
    }
  }
);
}
