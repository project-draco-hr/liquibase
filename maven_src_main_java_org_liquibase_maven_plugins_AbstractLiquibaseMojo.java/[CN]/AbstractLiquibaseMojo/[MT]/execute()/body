{
  getLog().info(MavenUtils.LOG_SEPARATOR);
  String shouldRunProperty=System.getProperty(Liquibase.SHOULD_RUN_SYSTEM_PROPERTY);
  if (shouldRunProperty != null && !Boolean.valueOf(shouldRunProperty).booleanValue()) {
    getLog().warn("LiquiBase did not run because '" + Liquibase.SHOULD_RUN_SYSTEM_PROPERTY + "' system property was set to false");
    return;
  }
  ClassLoader artifactClassLoader=getMavenArtifactClassLoader();
  configureFieldsAndValues(getFileOpener(artifactClassLoader));
  displayMojoSettings();
  checkRequiredParametersAreSpecified();
  Connection connection=null;
  try {
    connection=MavenUtils.getDatabaseConnection(artifactClassLoader,driver,url,username,password);
    Liquibase liquibase=createLiquibase(getFileOpener(artifactClassLoader),connection);
    getLog().info("Executing on Database: " + url);
    if (isPromptOnNonLocalDatabase() && !liquibase.isSafeToRunMigration()) {
      if (UIFactory.getInstance().getFacade().promptForNonLocalDatabase(liquibase.getDatabase())) {
        throw new LiquibaseException("User decided not to run against non-local database");
      }
    }
    performLiquibaseTask(liquibase);
  }
 catch (  LiquibaseException e) {
    releaseConnection(connection);
    throw new MojoFailureException(e.getMessage());
  }
  releaseConnection(connection);
  getLog().info(MavenUtils.LOG_SEPARATOR);
  getLog().info("");
}
