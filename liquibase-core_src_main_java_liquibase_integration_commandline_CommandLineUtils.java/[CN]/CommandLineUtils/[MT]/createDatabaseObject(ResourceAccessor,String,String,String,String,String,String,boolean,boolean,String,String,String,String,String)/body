{
  try {
    Database database=DatabaseFactory.getInstance().openDatabase(url,username,password,driver,databaseClass,driverPropertiesFile,propertyProviderClass,resourceAccessor);
    defaultCatalogName=StringUtils.trimToNull(defaultCatalogName);
    defaultSchemaName=StringUtils.trimToNull(defaultSchemaName);
    database.setDefaultCatalogName(defaultCatalogName);
    database.setDefaultSchemaName(defaultSchemaName);
    database.setOutputDefaultCatalog(outputDefaultCatalog);
    database.setOutputDefaultSchema(outputDefaultSchema);
    database.setLiquibaseCatalogName(StringUtils.trimToNull(liquibaseCatalogName));
    database.setLiquibaseSchemaName(StringUtils.trimToNull(liquibaseSchemaName));
    initializeDatabase(username,defaultCatalogName,defaultSchemaName,database);
    return database;
  }
 catch (  Exception e) {
    throw new DatabaseException(e);
  }
}
