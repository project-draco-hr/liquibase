{
  CompareControl compareControl=new CompareControl();
  DatabaseSnapshot referenceSnapshot=SnapshotGeneratorFactory.getInstance().createSnapshot(referenceDatabase.getDefaultSchema(),referenceDatabase,new SnapshotControl());
  DatabaseSnapshot targetSnapshot=SnapshotGeneratorFactory.getInstance().createSnapshot(targetDatabase.getDefaultSchema(),targetDatabase,new SnapshotControl());
  DiffResult diffResult=DiffGeneratorFactory.getInstance().compare(referenceSnapshot,targetSnapshot,compareControl);
  if (changeLogFile == null) {
    new DiffToChangeLog(diffResult,diffOutputControl).print(System.out);
  }
 else {
    new DiffToChangeLog(diffResult,diffOutputControl).print(changeLogFile);
  }
}
