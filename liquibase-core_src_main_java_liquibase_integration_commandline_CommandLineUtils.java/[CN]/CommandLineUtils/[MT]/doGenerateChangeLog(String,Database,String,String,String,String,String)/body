{
  Diff diff=new Diff(originalDatabase,defaultSchemaName);
  diff.setDiffTypes(diffTypes);
  diff.addStatusListener(new OutDiffStatusListener());
  DiffResult diffResult=diff.compare();
  diffResult.setChangeSetAuthor(author);
  diffResult.setChangeSetContext(context);
  diffResult.setDataDir(dataDir);
  if (StringUtils.trimToNull(changeLogFile) != null) {
    diffResult.printChangeLog(changeLogFile,originalDatabase);
  }
 else {
    PrintStream outputStream=System.out;
    diffResult.printChangeLog(outputStream,originalDatabase);
  }
}
