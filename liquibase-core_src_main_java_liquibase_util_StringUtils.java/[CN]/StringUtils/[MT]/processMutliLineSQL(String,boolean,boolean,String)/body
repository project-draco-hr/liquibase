{
  StringClauses parsed=SqlParser.parse(multiLineSQL,true,!stripComments);
  List<String> returnArray=new ArrayList<String>();
  String currentString="";
  String previousPiece=null;
  boolean previousDelimiter=false;
  for (  Object piece : parsed.toArray(true)) {
    if (splitStatements && piece instanceof String && isDelimiter((String)piece,previousPiece,endDelimiter)) {
      currentString=StringUtils.trimToNull(currentString);
      if (currentString != null) {
        returnArray.add(currentString);
      }
      currentString="";
      previousDelimiter=true;
    }
 else {
      if (!previousDelimiter || StringUtils.trimToNull((String)piece) != null) {
        if (!currentString.equals("") || StringUtils.trimToNull((String)piece) != null) {
          currentString+=piece;
        }
      }
      previousDelimiter=false;
    }
    previousPiece=(String)piece;
  }
  if (StringUtils.trimToNull(currentString) != null) {
    returnArray.add(currentString);
  }
  return returnArray.toArray(new String[returnArray.size()]);
}
